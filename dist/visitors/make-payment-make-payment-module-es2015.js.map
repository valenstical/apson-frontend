{"version":3,"sources":["/./src/app/members/make-payment/make-payment.component.html","/./src/app/members/make-payment/make-payment.component.ts","/./src/app/members/make-payment/make-payment.module.ts"],"names":[],"mappings":"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","file":"make-payment-make-payment-module-es2015.js","sourcesContent":["module.exports = \"<lib-alert\\n  [title]=\\\"response.title\\\"\\n  [type]=\\\"response.type\\\"\\n  [message]=\\\"response.message\\\"\\n  *ngIf=\\\"!hideAlert\\\"\\n></lib-alert>\\n<app-message-box\\n  [action]=\\\"'0'\\\"\\n  [buttonText]=\\\"'Pay membership fee'\\\"\\n  (btnClick)=\\\"startPayment()\\\"\\n  [isBusy]=\\\"isBusy\\\"\\n></app-message-box>\\n\"","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router } from '@angular/router';\nimport {\n  BaseComponent,\n  RequestService,\n  ScriptLoaderService,\n  AuthService,\n} from 'shared';\nimport { PaystackWidget } from 'helpers';\nimport { CommonService } from '../services/common-service.service';\n\n@Component({\n  selector: 'app-make-payment',\n  templateUrl: './make-payment.component.html',\n})\nexport class MakePaymentComponent extends BaseComponent\n  implements OnInit, OnDestroy {\n  isBusy = false;\n  paystackWidget: any;\n  constructor(\n    private requestServie: RequestService,\n    private scriptLoaderService: ScriptLoaderService,\n    private authService: AuthService,\n    private router: Router,\n    private commonService: CommonService,\n  ) {\n    super();\n  }\n\n  ngOnInit() {\n    this.commonService.setPageTitle('Make Payment');\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n  validatePayment(ref: string) {\n    this.subscription.add(\n      this.requestServie.validatePayment(ref).subscribe(\n        _ => {\n          this.isBusy = false;\n          const member = this.authService.getMember();\n          this.authService.setMember({ ...member, isActive: true });\n          this.router.navigateByUrl('/members/dashboard');\n        },\n        error => {\n          this.handleError(error);\n        },\n      ),\n    );\n  }\n\n  openPaystack(data: any) {\n    this.paystackWidget = new PaystackWidget(\n      data,\n      (response: any) => {\n        this.validatePayment(response.reference);\n      },\n      () => {\n        this.isBusy = false;\n      },\n    );\n    this.paystackWidget.open();\n  }\n\n  processPayment(data: any) {\n    if (!this.paystackWidget) {\n      this.scriptLoaderService.load('paystack').then(() => {\n        this.openPaystack(data);\n      });\n    } else {\n      this.openPaystack(data);\n    }\n  }\n\n  startPayment() {\n    this.isBusy = true;\n    this.subscription.add(\n      this.requestServie\n        .requestPayment('plan_membership_fee')\n        .subscribe(response => {\n          const { data } = response;\n          this.processPayment(data);\n        }),\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { SharedModule } from 'shared';\nimport { MakePaymentComponent } from './make-payment.component';\nimport { MessageBoxModule } from '../message-box/message-box.module';\n\n@NgModule({\n  declarations: [MakePaymentComponent],\n  imports: [\n    CommonModule,\n    SharedModule,\n    MessageBoxModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        pathMatch: 'full',\n        component: MakePaymentComponent,\n      },\n    ]),\n  ],\n})\nexport class MakePaymentModule {}\n"],"sourceRoot":""}