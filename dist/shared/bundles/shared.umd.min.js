!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("rxjs"),require("ngx-cacheable"),require("@angular/common/http"),require("helpers"),require("rxjs/operators"),require("@angular/router")):"function"==typeof define&&define.amd?define("shared",["exports","@angular/core","@angular/common","@angular/forms","rxjs","ngx-cacheable","@angular/common/http","helpers","rxjs/operators","@angular/router"],e):e((t=t||self).shared={},t.ng.core,t.ng.common,t.ng.forms,t.rxjs,t.ngxCacheable,t.ng.common.http,t.helpers,t.rxjs.operators,t.ng.router)}(this,function(t,e,o,n,r,s,i,a,c,l){"use strict";var p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};function u(t,e){function o(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}var h=function(){return(h=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function f(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}var d=function(){function t(){this.isBusy=!1,this.disabled=!1,this.type="submit",this.maxWidth="w-100",this.btnClick=new e.EventEmitter}return t.prototype.ngOnInit=function(){},t.prototype.onClick=function(t){"button"===this.type&&this.btnClick.emit(t)},t.decorators=[{type:e.Component,args:[{selector:"lib-submit-button",template:'<button\n  type="type"\n  class="btn-brand mt-4 btn-curved {{ maxWidth }}"\n  [disabled]="isBusy || disabled"\n  (click)="onClick($event)"\n>\n  {{ text }}\n  <div class="spinner-border" *ngIf="isBusy"></div>\n</button>\n'}]}],t.ctorParameters=function(){return[]},t.propDecorators={isBusy:[{type:e.Input}],text:[{type:e.Input}],disabled:[{type:e.Input}],type:[{type:e.Input}],maxWidth:[{type:e.Input}],btnClick:[{type:e.Output}]},t}(),m=function(){function t(){this.type="text"}return t.decorators=[{type:e.Component,args:[{selector:"lib-input",template:'<div class="form-group">\n  <label for="{{ name }}">{{ title }}</label>\n  <input\n    type="{{ type }}"\n    class="form-control"\n    id="{{ name }}"\n    [formControl]="formData.controls[name]"\n    [value]="formData.controls[name].value"\n  />\n  <span\n    class="display-error"\n    *ngIf="formData.controls[name].invalid && formData.controls[name].dirty"\n    >{{ invalidText }}</span\n  >\n</div>\n'}]}],t.propDecorators={name:[{type:e.Input}],title:[{type:e.Input}],type:[{type:e.Input}],formData:[{type:e.Input}],invalidText:[{type:e.Input}]},t}(),y=function(){function t(){this.data=[],this.disabled=!1,this.isLoading=!1,this.whenSelected=new e.EventEmitter}return t.prototype.notifyChange=function(t){this.whenSelected.emit(t)},t.decorators=[{type:e.Component,args:[{selector:"lib-select",template:'<div class="form-group">\n  <label for="{{ title }}">{{ title }}\n    <img *ngIf="isLoading" src="/assets/images/icons/loading.gif" width="20" /></label>\n  <select class="form-control custom-select" [formControl]="formData.controls[name]"\n    [value]="formData.controls[name].value" (change)="notifyChange(formData.controls[name].value)"\n    [attr.disabled]="disabled || isLoading ? \'true\' : null">\n    <option value="">-- Choose one --</option>\n    <option *ngFor="let item of data; let i = index" value="{{ i }}">\n      {{ item }}</option>\n  </select>\n  <span class="display-error"\n    *ngIf="formData.controls[name].invalid && formData.controls[name].dirty">{{ invalidText }}.</span>\n</div>'}]}],t.propDecorators={name:[{type:e.Input}],title:[{type:e.Input}],data:[{type:e.Input}],formData:[{type:e.Input}],invalidText:[{type:e.Input}],disabled:[{type:e.Input}],isLoading:[{type:e.Input}],whenSelected:[{type:e.Output}]},t}(),g=function(){function t(){this.text="Please wait..."}return t.decorators=[{type:e.Component,args:[{selector:"lib-busy",template:'<div class="busy text-center">\n  <img src="/assets/images/icons/busy.gif" width="120" />\n  <p>{{ text }}</p>\n</div>\n'}]}],t.ctorParameters=function(){return[]},t.propDecorators={text:[{type:e.Input}]},t}(),b=function(){function t(t){this.http=t}return t.prototype.request=function(t,e,o){return this.http[o](a.BASE_URL+"/"+t,e)},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:i.HttpClient}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(i.HttpClient))},token:t,providedIn:"root"}),t}(),v=function(){function t(t){this.http=t}return t.prototype.updateMember=function(t){return this.http.request("members",h({},t),"patch")},t.prototype.updateProfileImage=function(t){return this.http.request("members/image",h({},t),"patch")},t.prototype.registerMember=function(t){return this.http.request("members",h({},t),"post")},t.prototype.requestPayment=function(t){return this.http.request("payments/request",{params:{paymentType:t}},"get")},t.prototype.searchSchools=function(t){return this.get("schools",t)},t.prototype.validatePayment=function(t){return this.http.request("payments",{ref:t},"post")},t.prototype.post=function(t,e){return this.http.request(t,h({},e),"post")},t.prototype.patch=function(t,e){return this.http.request(t,h({},e),"patch")},t.prototype.get=function(t,e){return void 0===e&&(e={}),this.http.request(t,{params:e},"get")},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:b}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(b))},token:t,providedIn:"root"}),function(t,e,o,n){var r,s=arguments.length,i=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(s<3?r(i):s>3?r(e,o,i):r(e,o))||i);s>3&&i&&Object.defineProperty(e,o,i)}([s.Cacheable(),f("design:type",Function),f("design:paramtypes",[Object]),f("design:returntype",r.Observable)],t.prototype,"searchSchools",null),t}(),I=function(){function t(){this.subscription=new r.Subscription,this.isBusy=!1,this.isEmpty=!1,this.isError=!1,this.loading=!0,this.hideAlert=!0,this.show404=!0,this.response={title:"",message:[],type:""}}return t.prototype.toggleLoaders=function(t){this.isBusy=t,this.hideAlert=t},t.prototype.showMessage=function(t,e,o){this.response.message=t,this.response.title=e,this.response.type=o},t.prototype.arrayValues=function(t){if(!Array.isArray(t))return[];var e=[];return t.forEach(function(t){e.push(Object.values(t))}),e},t.prototype.handleError=function(t){this.toggleLoaders(!1);var e=t.error,o=e.data,n=e.message,r=0===(o=this.arrayValues(o)).length?"":n;n=r?o:n,this.showMessage(n,r,"danger")},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.toggleMenu=function(){},t}(),S=function(t){function e(){var e=t.call(this)||this;return e.debouceTime=500,e.dataSize=0,e.data=[],e.params={page:1,size:1e3},e}return u(e,t),e.prototype.ngOnInit=function(){this.populateTable()},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.onPopulateTableComplete=function(t,e){this.loading=!1,this.data=t,this.dataSize=e,this.isEmpty=0===t.length},e.prototype.registerSearchObservables=function(t){var e=this;this.registerObservables(t,"loading",function(o){e.filter(t,o)})},e.prototype.handleSearch=function(t,e){this[t+"$"].next(e)},e.prototype.registerObservables=function(t,e,o){var n=this;this.subscription.add(this[t+"$"].pipe(c.tap(function(t){n[e]=!0}),c.debounceTime(this.debouceTime),c.tap(function(t){n[e]=!1}),c.distinctUntilChanged()).subscribe(function(t){o(t)}))},e.prototype.filter=function(t,e){this.params=a.selectedFilter(this.params,t,e),this.populateTable()},e.prototype.paginate=function(t){var e=t.page,o=t.size;this.params.size=o,this.params.page=e,this.populateTable()},e}(I),x=function(t){function o(e){var o=t.call(this)||this;return o.requestService=e,o.schoolParams=new r.Subject,o.size=6,o}return u(o,t),o.prototype.ngOnInit=function(){this.params.size=this.size,this.initFilterSubscription(),this.populateTable()},o.prototype.setSchoolData=function(t){var e=t.data,o=e.result;e.page;this.loading=!1,this.schools=o||[],this.isEmpty=0===this.schools.length},o.prototype.initFilterSubscription=function(){var t=this;this.subscription.add(this.schoolParams.subscribe(function(e){var o=e.key,n=e.value;"state"===o&&t.params.lga&&delete t.params.lga,t.params=a.selectedFilter(t.params,o,n),t.populateTable()}))},o.prototype.populateTable=function(){var t=this;this.loading=!0,this.schools=[],this.subscription.add(this.requestService.searchSchools(this.params).subscribe(function(e){t.setSchoolData(e)},function(e){t.loading=!1,t.isError=!0}))},o.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this)},o.decorators=[{type:e.Component,args:[{selector:"lib-school-box",template:'<div class="row boxed-row" *ngIf="!loading">\n  <div class="col-6 col-lg-4 mb-4" *ngFor="let school of schools">\n    <div class="school-box card h-100">\n      <span class="blog-category school-type bg-school-type-0">{{\n        school.typeName\n      }}</span>\n      <a class="link-cover" routerLink="/schools/{{ school.id }}"></a>\n      <div class="school-box-cover">\n        <img src="{{ school.cover }}" width="100%" />\n      </div>\n      <div class="school-box-content card-body">\n        <a\n          *ngIf="school.contact"\n          href="tel: {{ school.contact.phone }}"\n          class="blog-control school-btn-call transition"\n          ><i class="fas fa-phone fa-flip-horizontal"></i\n        ></a>\n        <h4 class="school-box-title">{{ school.name }}</h4>\n        <ul class="fa-ul school-list" *ngIf="school.location || school.contact">\n          <li *ngIf="school.location">\n            <i class="fas fa-map-marker-alt fa-li text-secondary"></i>\n            {{ school.fullAddress }}\n          </li>\n          <li *ngIf="school.contact">\n            <i class="fas fa-li fa-phone fa-flip-horizontal text-secondary"></i>\n            {{ school.contact.phone }}\n          </li>\n        </ul>\n      </div>\n      <div class="school-footer card-footer">\n        \x3c!-- <div class="school-ratings float-left">\n          <i class="fas fa-star"></i>\n          <i class="fas fa-star"></i>\n          <i class="fas fa-star"></i>\n          <i class="fas fa-star"></i>\n          <i class="fas fa-star"></i>\n        </div> --\x3e\n        <a routerLink="/schools/{{ school.id }}" class="blog-link-more"\n          >Details <i class="fas fa-arrow-right transition"></i\n        ></a>\n      </div>\n    </div>\n  </div>\n</div>\n<lib-busy *ngIf="loading"></lib-busy>\n<lib-not-found-box\n  *ngIf="isEmpty && !loading"\n  message="There is no school matching your search."\n  title="No schools found"\n>\n</lib-not-found-box>\n'}]}],o.ctorParameters=function(){return[{type:v}]},o.propDecorators={schoolParams:[{type:e.Input}],size:[{type:e.Input}]},o}(S),j=function(){function t(){this.data=[],this.placeholder="Choose one",this.defaultValue="",this.whenSelected=new e.EventEmitter}return t.prototype.notifyChange=function(t){this.whenSelected.emit(t)},t.decorators=[{type:e.Component,args:[{selector:"lib-simple-select",template:'<select class="form-control custom-select" [value]="defaultValue" (change)="notifyChange($event.target.value)">\n  <option value="">-- {{placeholder}} --</option>\n  <option *ngFor="let item of data; let i = index" value="{{ i }}">\n    {{ item }}</option>\n</select>'}]}],t.propDecorators={data:[{type:e.Input}],placeholder:[{type:e.Input}],defaultValue:[{type:e.Input}],whenSelected:[{type:e.Output}]},t}(),w=function(){function t(t){this.router=t,this.icon="assets/images/icons/empty.svg"}return t.decorators=[{type:e.Component,args:[{selector:"lib-not-found-box",template:'<div class="form pl-4 position-relative pr-4 pt-5 form-box pb-4 empty-data ">\n  <div class="form-group text-center mb-3 max-width-500">\n    <img src="{{ icon }}" width="150" />\n    <h5 class="empty-data-title mt-5 mb-4 font-weight-bold text-uppercase">{{ title }}</h5>\n    <p class="empty-data-description">\n      {{ message }}\n    </p>\n  </div>\n</div>'}]}],t.ctorParameters=function(){return[{type:l.Router}]},t.propDecorators={icon:[{type:e.Input}],message:[{type:e.Input}],title:[{type:e.Input}]},t}(),D=function(){function t(t){this.location=t}return t.prototype.goBack=function(){this.location.back()},t.decorators=[{type:e.Component,args:[{selector:"lib-back-button",template:'<a\n  (click)="goBack()"\n  class="link-back pointer transition text-white d-inline-block mt-4"\n  ><i class="fas fa-arrow-left"></i\n></a>\n'}]}],t.ctorParameters=function(){return[{type:o.Location}]},t}(),C=function(){function t(){this.type="warning"}return t.prototype.ngOnInit=function(){this.message=Array.isArray(this.message)?this.message:[this.message]},t.decorators=[{type:e.Component,args:[{selector:"lib-alert",template:'<div class="alert alert-{{ type }} mb-4">\n  <strong class="d-block mb-2" *ngIf="title">{{ title }}</strong>\n  <ul class="d-block mt-0 mb-0 list-unstyled">\n    <li *ngFor="let item of message" class="mb-2">{{ item }}</li>\n  </ul>\n</div>\n'}]}],t.propDecorators={type:[{type:e.Input}],title:[{type:e.Input}],message:[{type:e.Input}]},t}(),k=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[D,d,C,m,y,j,g,x,w],imports:[o.CommonModule,l.RouterModule,n.FormsModule,n.ReactiveFormsModule],exports:[n.FormsModule,n.ReactiveFormsModule,D,d,C,m,y,g,j,x,w]}]}],t}(),O=function(){function t(t,e){this.router=t,this.httpService=e,this.url=a.MEMBERS_URL}return t.prototype.login=function(t){return this.httpService.request("members/login",h({},t),"post")},t.prototype.setMember=function(t){this.initMember(),this.member.next(t),localStorage.setItem("member",JSON.stringify(t))},t.prototype.getMember=function(){var t=localStorage.getItem("member");return t?JSON.parse(t):null},t.prototype.logout=function(){this.member=null,localStorage.removeItem("member"),this.router.navigateByUrl("/login")},t.prototype.initMember=function(){this.member||(this.member=new r.Subject)},t.prototype.gotoMembers=function(){location.assign(a.MEMBERS_URL)},t.prototype.gotoVisitors=function(){location.assign(a.VISITORS_URL)},t.prototype.gotoStudents=function(){location.assign(a.STUDENTS_URL)},t.prototype.gotoAdmin=function(){location.assign(a.ADMIN_URL)},t.prototype.isLoggedIn=function(t){this.url=t;var e=this.getMember();return!!e&&(this.initMember(),this.member.next(e),!0)},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:l.Router},{type:b}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(l.Router),e.ɵɵinject(b))},token:t,providedIn:"root"}),t}(),M=function(){function t(t){this.authService=t}return t.prototype.intercept=function(t,e){var o=this,n=this.authService.getMember();return n&&(t=t.clone({setHeaders:{Authorization:"Bearer "+n.token}})),e.handle(t).pipe(c.catchError(function(t){return 401===t.status&&o.authService.logout(),r.throwError(t)}))},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:O}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(O))},token:t,providedIn:"root"}),t}(),P=function(){function t(){this.school=new r.BehaviorSubject(null)}return t.prototype.setValue=function(t){this.school.next(t)},t.prototype.get=function(){return this.school},t.prototype.getValue=function(){return this.school.getValue()},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),E=[{name:"cloudinary",src:"https://widget.cloudinary.com/v2.0/global/all.js"},{name:"paystack",src:"https://js.paystack.co/v1/inline.js"}],q=function(){function t(){var t=this;this.scripts={},E.forEach(function(e){t.scripts[e.name]={loaded:!1,src:e.src}})}return t.prototype.load=function(){for(var t=this,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var n=[];return e.forEach(function(e){return n.push(t.loadScript(e))}),Promise.all(n)},t.prototype.loadScript=function(t){var e=this;return new Promise(function(o,n){if(e.scripts[t].loaded)o({script:t,loaded:!0,status:"Already Loaded"});else{var r=document.createElement("script");r.type="text/javascript",r.src=e.scripts[t].src,r.readyState?r.onreadystatechange=function(){"loaded"!==r.readyState&&"complete"!==r.readyState||(r.onreadystatechange=null,e.scripts[t].loaded=!0,o({script:t,loaded:!0,status:"Loaded"}))}:r.onload=function(){e.scripts[t].loaded=!0,o({script:t,loaded:!0,status:"Loaded"})},r.onerror=function(e){return o({script:t,loaded:!1,status:"Loaded"})},document.getElementsByTagName("head")[0].appendChild(r)}})},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),R=function(){},L=function(){};t.AuthService=O,t.BaseComponent=I,t.BaseDataComponent=S,t.HttpService=b,t.InterceptorService=M,t.Member=R,t.RequestService=v,t.School=L,t.SchoolService=P,t.ScriptLoaderService=q,t.ScriptStore=E,t.SharedModule=k,t.ɵa=D,t.ɵb=d,t.ɵc=C,t.ɵd=m,t.ɵe=y,t.ɵf=j,t.ɵg=g,t.ɵh=x,t.ɵi=w,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=shared.umd.min.js.map